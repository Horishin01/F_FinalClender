@page
@model EnableAuthenticatorModel
@{
    ViewData["Title"] = "Authenticator アプリの設定";
    ViewData["ActivePage"] = ManageNavPages.TwoFactorAuthentication;
}

<div class="settings-card">
    <h2>@ViewData["Title"]</h2>
    <p class="settings-description">以下の手順で Authenticator アプリを登録し、サインイン時に確認コードを入力できるようにします。</p>

    <partial name="_StatusMessage" for="StatusMessage" />

    <ol class="list">
        <li class="mb-3">
            Microsoft Authenticator や Google Authenticator など、お好みの 2FA アプリをスマートフォンにインストールしてください。
        </li>
        <li class="mb-3">
            アプリで QR コードを読み取るか、下記のキーを直接入力します。
            <div class="form-field mt-2">
                <label>キー</label>
                <code>@Model.SharedKey</code>
            </div>
            <div id="qrCode"></div>
            <div id="qrCodeData" data-url="@Model.AuthenticatorUri"></div>
        </li>
        <li>
            アプリに表示された 6 桁の確認コードを下の入力欄に入力し、「確認」ボタンを押してください。
            <form id="send-code" method="post" class="form-grid mt-3">
                <div class="form-field">
                    <label asp-for="Input.Code">確認コード</label>
                    <input asp-for="Input.Code" autocomplete="off" placeholder="123456" />
                    <span asp-validation-for="Input.Code" class="text-danger"></span>
                </div>
                <div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary-modern">確認</button>
                </div>
            </form>
        </li>
    </ol>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
