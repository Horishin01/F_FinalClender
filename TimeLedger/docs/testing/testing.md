# テスト方針（更新日: 2026-02-12）

## 現状
- 自動テストは未整備。出荷前は手動回帰テストを実施する。

## 手動チェックリスト
- 認証/認可: ログイン/ログアウト、パスワードリセット、メール確認フロー、Admin ロールでのみ管理画面にアクセスできること。
- カレンダー: イベントの作成/編集/削除/閲覧、終日・繰り返し・リマインダー・カテゴリ選択が期待通り反映されること。
- カテゴリ: CRUD とイベントへの再割当て、使用中カテゴリの削除制御。
- 外部連携: Outlook/Google の連携・再連携・解除、期限切れトークン時のエラーハンドリング。iCloud 同期（新規 UID 追加が DB に保存されること）。
- UI/UX: モバイル幅（≤768px）で主要画面が崩れないこと、FullCalendar の表示・同期ボタン動作。
- セキュリティ: CSRF トークン未送信時に拒否されること、未ログインで保護ページにアクセスするとログイン画面へリダイレクトされること。
- ログ/例外: 想定外入力で 500 にならず、スタックトレースが露出しないこと。

## 自動化の優先候補
- サービス層のユニットテスト（IcalParserService、ExternalCalendarSyncService など）を xUnit + NSubstitute で追加。
- MVC コントローラーの最小限の統合テストを `WebApplicationFactory` で用意し、認可/バリデーションを検証。
- データアクセスは InMemory または Testcontainers for PostgreSQL を用いた統合テストで検証。

## 実行コマンド（テスト追加後）
- `dotnet test`（ソリューションルートまたはテストプロジェクトで実行）。CI が導入されたら Pull Request 時に必須化する。
