@model Event
@{
    if (Model is null) { throw new NullReferenceException(); }
    ViewData["Title"] = "イベント編集";
}
<link rel="stylesheet" href="~/css/event-forms.css" asp-append-version="true" />

<div class="page-wrap">
    <div class="card">
        <div class="head">
            <div>
                <div class="title">イベント編集</div>
                <p class="text-muted mb-0">@Model.Title</p>
            </div>
            <div class="actions">
                <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-secondary">詳細へ戻る</a>
                <button form="eventEditForm" type="submit" class="btn btn-primary">
                    <i class="fa-solid fa-floppy-disk me-1"></i> 保存
                </button>
            </div>
        </div>

        <div class="body">
            <div class="main">
                <form id="eventEditForm" asp-action="Edit" method="post">
                    @Html.AntiForgeryToken()
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                    <partial name="_EditPartial.cshtml" model="Model" />
                </form>
            </div>

            <aside class="side">
                <div class="side-section">
                    <div class="side-title">プレビュー</div>
                    <div class="ev-chip" id="evPreview">
                        <span class="dot" id="prevDot"></span>
                        <span class="time" id="prevTime">--:--</span>
                        <span class="ttl" id="prevTitle">@Model.Title</span>
                    </div>
                    <div class="hint">入力内容を更新すると表示もリアルタイムで反映されます。</div>
                </div>

                <div class="side-section">
                    <div class="side-title">アピアランス (UIのみ)</div>
                    <input id="evColor" type="color" value="#6d5dfc" class="color-picker" />
                    <div class="swatches">
                        <button type="button" class="sw" data-c="#ef4444" style="--c:#ef4444"></button>
                        <button type="button" class="sw" data-c="#f97316" style="--c:#f97316"></button>
                        <button type="button" class="sw" data-c="#10b981" style="--c:#10b981"></button>
                        <button type="button" class="sw" data-c="#3b82f6" style="--c:#3b82f6"></button>
                        <button type="button" class="sw" data-c="#8b5cf6" style="--c:#8b5cf6"></button>
                        <button type="button" class="sw" data-c="#64748b" style="--c:#64748b"></button>
                    </div>
                </div>
            </aside>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/js/event-forms.js" asp-append-version="true"></script>
}
