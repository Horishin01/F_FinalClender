@model Event
@{
    if (!(Model is not null)) { throw new NullReferenceException(); }
    ViewData["Title"] = "イベント編集";
}
<link rel="stylesheet" href="~/css/event-forms.css" asp-append-version="true" />

<div class="page-wrap">
    <div class="card">
        <div class="head">
            <div class="title">イベント編集</div>
            <div class="actions">
                <a asp-action="Details" asp-route-id="@Model?.Id" class="btn btn-secondary">詳細</a>
                <button form="eventEditForm" type="submit" class="btn btn-primary">保存</button>
            </div>
        </div>

        <div class="body">
            <div class="main">
                <form id="eventEditForm" asp-action="Edit" method="post">
                    @Html.AntiForgeryToken()
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                    <div class="form-group">
                        <label asp-for="Id" class="control-label"></label>
                        <input asp-for="Id" class="form-control" disabled />
                        <input type="hidden" asp-for="Id" />
                        <span asp-validation-for="Id" class="text-danger"></span>
                    </div>

                    <partial name="_EditPartial.cshtml" model="Model" />
                </form>
            </div>

            <aside class="side">
                <div class="side-section">
                    <div class="side-title">プレビュー</div>
                    <div class="ev-chip" id="evPreview">
                        <span class="dot" id="prevDot"></span>
                        <span class="time" id="prevTime">00:00</span>
                        <span class="ttl" id="prevTitle">@Model?.Title</span>
                    </div>
                    <div class="hint">件名/開始/終了の入力にあわせて自動更新します。</div>
                </div>

                <div class="side-section">
                    <div class="side-title">色（フロントのみ）</div>
                    <input id="evColor" type="color" value="#3b82f6" class="color-picker" />
                    <div class="swatches">
                        <button type="button" class="sw" data-c="#ef4444" style="--c:#ef4444"></button>
                        <button type="button" class="sw" data-c="#f59e0b" style="--c:#f59e0b"></button>
                        <button type="button" class="sw" data-c="#10b981" style="--c:#10b981"></button>
                        <button type="button" class="sw" data-c="#3b82f6" style="--c:#3b82f6"></button>
                        <button type="button" class="sw" data-c="#8b5cf6" style="--c:#8b5cf6"></button>
                        <button type="button" class="sw" data-c="#64748b" style="--c:#64748b"></button>
                    </div>
                </div>
            </aside>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/js/event-forms.js" asp-append-version="true"></script>
}
